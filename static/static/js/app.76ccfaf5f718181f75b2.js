webpackJsonp([4],{"+BTi":function(t,e){},"+Rdb":function(t,e){},"//fg":function(t,e,a){"use strict";var r={data:function(){return{selector:{}}},created:function(){},methods:{renderData:a("fCy8").a.renderData,getLength:function(t){var e=0,a=this.selector[t][0],r=this.data.table[t].groupMap?this.data.table[t].groupMap[a]||a:this.data.table[t].map?this.data.table[t].map[a]||a:a;return r="all"===a?"状态 : 显示所有":r,16*(e+=r.toString().length)+100}},props:{getSelectItem:{required:!0},data:{required:!0}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.data.table,function(e,r){return t.checkKeyPermission(r,e)&&"group"===e.type&&!e.hidden?a("div",{staticStyle:{display:"inline-block",margin:"10px 5px",float:"left","min-width":"110px"},style:t.selector[r]&&t.selector[r].length?"width:"+t.getLength(r)+"px":"max-width: 110px"},[a("el-select",{staticStyle:{width:"100%",display:"block",margin:"0 0"},attrs:{multiple:"","collapse-tags":!0,placeholder:e.name},on:{change:function(e){t.$emit("selectKey",[e,r])}},model:{value:t.selector[r],callback:function(e){t.$set(t.selector,r,e)},expression:"selector[key]"}},[a("el-option",{attrs:{value:"all",label:e.name+" : 显示所有"}}),t._v(" "),t._l(t.getSelectItem(t.data.data,r),function(e,n){return a("el-option",{key:n,attrs:{value:e[r],label:t.renderData(r,t.data.table,e,!1)}})})],2)],1):t._e()}))},staticRenderFns:[]},i=a("VU/8")(r,n,!1,function(t){a("BHTJ")},null,null);e.a=i.exports},"/5Kc":function(t,e,a){"use strict";var r={data:function(){return{}},created:function(){},props:{data:{required:!0},groupSelect:{required:!0},listPage:{},PageCount:{},self:{}},methods:{renderData:a("fCy8").a.renderData,showMethod:function(t,e){var a=this.data;return(!t.admin||this.checkAdmin())&&(!t.superAdmin||this.checkSuperAdmin())&&(!t.show||t.show(this.groupSelect(a.data)[e]))&&a.methods},getMethodName:function(t,e,a){return("function"==typeof t.name?t.name(this.groupSelect(this.data.data)[a]):t.name)||e},runMethod:function(t,e,a,r){return("string"==typeof t?new Function("return "+t.replace(/(^\s*)|(\s*$)/g,"")):t)()(e,a,r,this.self)}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tbody",t._l(t.groupSelect(t.data.data),function(e,r){return t.PageCount&&parseInt(r/t.PageCount)!==t.listPage?t._e():a("tr",[t.data.index?a("td",[t._v("\n    "+t._s(r+1)+"\n  ")]):t._e(),t._v(" "),t._l(t.data.table,function(r,n){return t.checkKeyPermission(n,r)&&!r.hidden?a("td",{style:r.style?r.style.default+";"+r.style[e[n]]:""},[r.url?a("a",{attrs:{target:"_blank",href:t.renderData(n,t.data.table,e)||"#"}},[t._v("\n      "+t._s(t.renderData(n,t.data.table,e))+"\n    ")]):a("span",[t._v("\n        "+t._s(t.renderData(n,t.data.table,e))+"\n        ")])]):t._e()}),t._v(" "),t.data.methods?a("td",{staticClass:"control"},t._l(t.data.methods,function(e,n,i){return t.showMethod(e,r)?a("span",{staticStyle:{margin:"3px"}},[a("a",{key:r,staticStyle:{"user-select":"none",width:"100%"},on:{click:function(a){t.runMethod(e.func,r,t.groupSelect(t.data.data),t.data.table)}}},[t._v("\n          "+t._s(t.getMethodName(e,n,r))+"\n        ")])]):t._e()})):t._e()],2)}))},staticRenderFns:[]},i=a("VU/8")(r,n,!1,function(t){a("dvv6")},null,null);e.a=i.exports},"/I4U":function(t,e){},"/bpg":function(t,e){},0:function(t,e){},"2R1j":function(t,e){},"5SKm":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[t.data.index?a("th",[t._v("序号")]):t._e(),t._v(" "),t._l(t.data.table,function(e,r){return t.checkKeyPermission(r,e)&&!e.hidden?a("th",{on:{click:function(e){t.$emit("sortData",r)}}},[a("a",{staticStyle:{width:"100%",height:"100%",display:"block","white-space":"nowrap","line-height":"60px","user-select":"none"}},[t.sort.key===r?a("i",{class:t.sort.reverse?"el-icon-arrow-up":"el-icon-arrow-down"}):t._e(),t._v("\n      "+t._s(e.name||r)+"\n    ")])]):t._e()}),t._v(" "),t.data.methods?a("th",[t._v("操作")]):t._e()],2)},staticRenderFns:[]},n=a("VU/8")({data:function(){return{}},created:function(){},props:{sort:{required:!0},data:{required:!0}},methods:{}},r,!1,function(t){a("w0Zi")},null,null);e.a=n.exports},"8J/f":function(t,e){},"8j4E":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.data?a("el-pagination",{staticStyle:{margin:"20px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":t.pageCount,total:t.total||t.data.length},on:{"current-change":function(e){t.$emit("selectPage",e)},"size-change":function(e){t.$emit("changeSize",e)}}}):t._e()],1)},staticRenderFns:[]},n=a("VU/8")({data:function(){return{}},created:function(){},props:{data:{required:!0},pageCount:{required:!0},total:{}},methods:{}},r,!1,function(t){a("2R1j")},null,null);e.a=n.exports},"8z31":function(t,e){},"9lWm":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"inline-block"}},[a("el-popover",{ref:"hiddenController",attrs:{placement:"right"}},[a("div",{staticStyle:{"overflow-y":"scroll","max-height":"400px"}},[t._v("\n      设置隐藏\n      "),t._l(t.data.table,function(e,r){return t.checkKeyPermission(r,e)?a("div",{key:r,ref:"form",refInFor:!0,attrs:{"label-width":"100px"}},[a("el-checkbox",{staticStyle:{margin:"3px"},attrs:{label:e.name||r,checked:e.hidden},model:{value:e.hidden,callback:function(a){t.$set(e,"hidden",a)},expression:"val.hidden"}})],1):t._e()})],2)]),t._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:hiddenController",arg:"hiddenController"}]},[a("i",{staticClass:"el-icon-edit-outline"})])],1)},staticRenderFns:[]},n=a("VU/8")({data:function(){return{}},created:function(){},methods:{},props:["data"]},r,!1,function(t){a("FsXR")},null,null);e.a=n.exports},BHTJ:function(t,e){},DSCY:function(t,e){},Df1Z:function(t,e){},Fn1y:function(t,e){},FsXR:function(t,e){},GXEp:function(t,e){},I4nB:function(t,e){},IxJZ:function(t,e){},JItZ:function(t,e){},LUXn:function(t,e,a){"use strict";var r={data:function(){return{exportData:{exportTitle:!0,exportKeys:{},exportMode:!1}}},created:function(){},methods:{exportTable:function(){var t="",e=this,a=function(a){if(e.exportData.exportTitle){for(var r in e.exportData.exportKeys)e.exportData.exportKeys[r]&&(t+=(e.data.table[r].name||r)+",");t+="\n"}for(var n=0;n<a.length;n++){for(var i in e.exportData.exportKeys)e.exportData.exportKeys[i]&&("time"===e.data.table[i].type?t+=e.formatDate(a[n][i])+",":t+=a[n][i]+",");t+="\n"}e.downloadFile(t,"data.csv")};this.exporter&&this.exporter(a,Object.keys(e.exportData.exportKeys)),this.groupSelect&&a(this.groupSelect(this.data.data))}},props:{data:{required:!0},groupSelect:{},exporter:{},dataDownLoad:{}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"inline-block"}},[a("el-popover",{ref:"exportor",attrs:{placement:"left"}},[a("div",[a("div",{staticStyle:{"overflow-y":"scroll","max-height":"300px"},on:{click:function(t){t.stopPropagation()}}},[t._v("\n        导出表格\n        "),t._l(t.data.table,function(e,r,n){return t.checkKeyPermission(r,e)?a("el-checkbox",{key:r,staticStyle:{margin:"3px",display:"block"},attrs:{label:e.name||r},model:{value:t.exportData.exportKeys[r],callback:function(e){t.$set(t.exportData.exportKeys,r,e)},expression:"exportData.exportKeys[key]"}}):t._e()})],2),t._v(" "),a("el-checkbox",{staticStyle:{margin:"20px 10px",display:"block"},model:{value:t.exportData.exportTitle,callback:function(e){t.$set(t.exportData,"exportTitle",e)},expression:"exportData.exportTitle"}},[t._v("\n        导出标签\n      ")]),t._v(" "),a("el-button",{on:{click:t.exportTable}},[t._v("\n        导出\n      ")]),t._v(" "),t.groupSelect?a("el-button",{on:{click:function(e){t.exportData.exportMode=!t.exportData.exportMode}}},[t._v("\n        预览\n      ")]):t._e()],1)]),t._v(" "),t.exportData.exportMode?a("a",{staticClass:"cover",on:{click:function(e){t.exportData.exportMode=!t.exportData.exportMode}}},[a("table",[t.exportData.exportTitle?a("tr",t._l(t.exportData.exportKeys,function(e,r){return t.exportData.exportKeys[r]?a("td",[t._v("\n          "+t._s(t.data.table[r].name||r)+"\n        ")]):t._e()})):t._e(),t._v(" "),t._l(t.groupSelect(t.data.data),function(e,r){return r<2?a("tr",t._l(t.exportData.exportKeys,function(r,n){return t.exportData.exportKeys[n]?a("td",[t._v("\n          "+t._s(e[n])+"\n        ")]):t._e()})):t._e()}),t._v(" "),a("tr",[a("td",{attrs:{colspan:Object.keys(t.exportData.exportKeys).length}},[t._v("...")])])],2)]):t._e(),t._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:exportor",arg:"exportor"}]},[a("i",{class:t.dataDownLoad?"el-icon-loading":"el-icon-document"}),t._v("\n    "+t._s(t.dataDownLoad?" 下载中":"")+"\n  ")])],1)},staticRenderFns:[]},i=a("VU/8")(r,n,!1,function(t){a("Fn1y")},"data-v-03aeda78",null);e.a=i.exports},Mf0D:function(t,e){},MhN8:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("7+uW"),n=(a("/bpg"),a("ACGT")),i=a.n(n),o=(a("Mf0D"),a("exT9")),s=a.n(o),c=(a("ylrw"),a("6oiW")),l=a.n(c),d=(a("bwiK"),a("SExR")),u=a.n(d),h=(a("isgN"),a("tLa+")),f=a.n(h),p=(a("I4nB"),a("STLj")),m=a.n(p),g=(a("8z31"),a("SXzR")),v=a.n(g),y=(a("+Rdb"),a("Mezo")),b=a.n(y),_=(a("qunJ"),a("vqwl")),x=a.n(_),S=(a("cDSy"),a("e0Bm")),k=a.n(S),D=(a("jAzQ"),a("wOhx")),w=a.n(D),$=(a("dmRH"),a("EKTV")),C=a.n($),A=(a("X+ky"),a("HJMx")),K=a.n(A),T=(a("uKbn"),a("GegP")),P=a.n(T),O=(a("DSCY"),a("LaeV")),M=a.n(O),R=(a("IxJZ"),a("NoPp")),E=a.n(R),F=(a("Df1Z"),a("D3wm")),I=a.n(F),U=(a("WzZF"),a("wxbk")),j=a.n(U),L=(a("wlbC"),a("1ZIF")),N=a.n(L),X=(a("GXEp"),a("+BTi"),a("mtrD")),q=a.n(X),V=a("SXGM"),z=function(t){this.checkKeyPermission=function(e,a){return"_"!==e[0]&&(!a.admin||this.checkAdmin())&&(!a.superAdmin||this.checkSuperAdmin())&&(!a.blackList||-1===a.blackList.indexOf(t.state.user.Id))},this.checkAdmin=function(){return t.getters.userValid&&t.getters.userIsAdmin},this.checkSuperAdmin=function(){return t.getters.userValid&&t.getters.userIsSuperAdmin&&t.getters.userIsAdmin}},B=a("8+8L");r.default.use(q.a),r.default.use(N.a),r.default.use(j.a),r.default.use(I.a),r.default.use(E.a),r.default.use(M.a),r.default.use(P.a),r.default.use(K.a),r.default.use(C.a),r.default.use(w.a),r.default.use(k.a),r.default.use(x.a),r.default.use(b.a),r.default.use(v.a),r.default.use(m.a),r.default.use(f.a),r.default.use(u.a),r.default.use(l.a),r.default.use(s.a),r.default.use(i.a),r.default.use(B.a),r.default.prototype.initStyle=V.a.addCssFromText,r.default.prototype.formatDate=V.a.formatDate,r.default.prototype.downloadFile=V.a.downloadFile,r.default.prototype.getTodayTime=V.a.getTodayTime,window.onbeforeunload=function(){window.localStorage.setItem("form",JSON.stringify(H.form))};var W={path:"/login",name:"login",component:function(t){a.e(2).then(function(){var e=[a("+nW5")];t.apply(null,e)}.bind(this)).catch(a.oe)}},J={path:"/sys",name:"systemManage",component:function(t){a.e(0).then(function(){var e=[a("fHsw")];t.apply(null,e)}.bind(this)).catch(a.oe)}},Z={init:function(t,e){this.$http=r.default.http,this.$set=r.default.set,this.$router=t,this.$store=e,Object.assign(e.state,H),this.initPermission(),this.login(),setInterval(function(){e.state.currentTime=new Date},1e3)},initPermission:function(){var t=this,e=new z(this.$store);this.checkSuperAdmin=e.checkSuperAdmin,this.checkAdmin=e.checkAdmin,r.default.prototype.checkKeyPermission=e.checkKeyPermission,r.default.prototype.checkAdmin=e.checkAdmin,r.default.prototype.checkSuperAdmin=e.checkSuperAdmin,this.$router.beforeEach(function(a,r,n){e.checkSuperAdmin()&&n(),t.$store.state.userRoutes.indexOf(a.name)<0&&null!==r.name?n(!1):n()}),this.$router.addRoutes([W,J])},login:function(){var t=this,e=this.getFormStorageList()||"";this.$http.get("/api/auth").then(function(a){if(a.data.ok){var r=a.data.data;t.$http.post("/api/table",{m:e}).then(function(e){t.initUser(r),t.initData(e.data.data),t.initRouter()}).catch(function(e){console.log(e),t.$router.push("/login")})}}).catch(function(e){console.log(e),t.$router.push("/login")})},initUser:function(t){this.$set(this.$store.state,"user",t)},initRouter:function(){this.mapRoute(this.$store.state.menu,this.$store.state.userRoutes,this.$store.state.form,this.$router),this.$store.state.inited=!0},mapRoute:function(t,e,r,n){var i=this;Object.keys(t).map(function(o){"_"!==o[0]&&(t[o].hasOwnProperty("item")?i.mapRoute(t[o].item,e,r,n):t[o].admin&&!i.checkAdmin()||t[o].superAdmin&&!i.checkSuperAdmin()||(e.push(t[o].route||o),t[o].hasOwnProperty("bindTable")&&n.addRoutes([{path:"/"+o,name:o,meta:{config:r[t[o].bindTable]},component:function(t){a.e(1).then(function(){var e=[a("uldG")];t.apply(null,e)}.bind(this)).catch(a.oe)}}])))})},initData:function(t){var e=this.getFormStorage();for(var a in t){var r=t[a],n=V.a.base64Decode(a),i=r.substring(0,32);if(e[n]&&e[n]._md5===i)this.$set(this.$store.state.form,n,e[n]);else{var o=r.substring(32,r.length);this.$set(this.$store.state.form,n,V.a.decodeXdData(o))}this.$store.state.form[n]._md5=i}try{if(this.$store.state.form.style&&this.$store.state.form.style.style&&this.initStyle(this.$store.state.form.style.style),this.$store.state.form.headMenu)this.$set(this.$store.state,"menu",this.$store.state.form.headMenu);else if(this.checkSuperAdmin()){var s={sys:{name:"系统设置",route:"sys",superAdmin:!0}};this.$set(this.$store.state,"menu",s)}}catch(t){console.log(t)}document.title=this.$store.getters.title},getFormStorage:function(){var t=window.localStorage.getItem("form");return!!t&&JSON.parse(t)},getFormStorageList:function(){var t=this.getFormStorage();if(!t)return!1;var e={};for(var a in t)e[V.a.base64Encode(a)]=t[a]._md5;return V.a.base64Encode(JSON.stringify(e))}},H={buttonType:"",form:{},inited:!1,userRoutes:["","/","login"],currentTime:new Date,isIEBrowser:window.navigator.userAgent.indexOf("MSIE")>=1||!!window.ActiveXObject||"ActiveXObject"in window||window.navigator.userAgent.indexOf("Edge")>=1,dataPageUpdater:0},G=Z,Y={data:function(){return{}},methods:{reload:function(){window.localStorage.setItem("form",JSON.stringify(this.$store.state.form)),this.$router.push("/"),window.location.reload()}}},Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("a",{style:this.$store.getters.titleStyle,on:{click:this.reload}},[this._v("\n    "+this._s(this.$store.getters.title)+"\n  ")])])},staticRenderFns:[]},tt=a("VU/8")(Y,Q,!1,function(t){a("zmq2")},null,null).exports,et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"neck"},[a("div",{staticStyle:{float:"left"}},[a("div",{staticStyle:{float:"left"}},[a("i",{staticClass:"el-icon-time"}),t._v("\n      当前时间 : "+t._s(t.formatDate(t.$store.state.currentTime,"wide_datetime"))+"\n    ")])]),t._v(" "),t.$store.state.user?a("div",{staticStyle:{float:"right"},on:{click:function(e){t.$router.push("/login")}}},[a("a",[a("i",{staticClass:"el-icon-star-off"}),t._v("\n      当前用户 : "+t._s(t.$store.getters.username)+"\n    ")])]):t._e()])},staticRenderFns:[]},at=a("VU/8")({data:function(){return{}},created:function(){},methods:{}},et,!1,function(t){a("8J/f")},"data-v-89fb3f68",null).exports,rt={data:function(){return{self:this}},created:function(){},methods:{logout:function(){this.$store.state.user&&this.$http.get("/api/logout").then(function(t){window.localStorage.clear("form"),window.location.reload()})}}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{overflow:"visible",position:"absolute",right:"0",top:"0"}},[a("el-menu",{staticStyle:{float:"right","user-select":"none"},attrs:{"active-text-color":"#0c91ff",mode:"horizontal",router:!0}},[t._l(t.$store.state.menu,function(e,r){return t.$store.state.user&&t.checkKeyPermission(r,e)&&e.item?a("el-submenu",{key:r,attrs:{index:r}},[a("template",{slot:"title"},[t._v("\n        "+t._s(e.name||r)+"\n      ")]),t._v(" "),t._l(e.item,function(e,n){return t.checkKeyPermission(n,e)?a("el-menu-item",{key:n,attrs:{route:e.route||n,disabled:!1,index:r+n}},[t._v("\n        "+t._s(e.name||n)+"\n      ")]):t._e()})],2):t.$store.state.user&&t.checkKeyPermission(r,e)?a("el-menu-item",{attrs:{index:r,route:e.route||r,disabled:!1}},[t._v("\n      "+t._s(e.name||r)+"\n    ")]):t._e()}),t._v(" "),a("el-menu-item",{attrs:{index:"login",disabled:!1,route:"login"},on:{click:t.logout}},[t._v("\n      "+t._s(t.$store.state.user?"退出登录":"登录")+"\n    ")])],2)],1)},staticRenderFns:[]},it={components:{logo:tt,headMenu:a("VU/8")(rt,nt,!1,function(t){a("kMuY")},null,null).exports,headNeck:at},data:function(){return{}},methods:{}},ot={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",{staticStyle:{width:"100%",height:"61px"}},[e("logo"),this._v(" "),e("head-menu"),this._v(" "),e("div",{staticStyle:{clear:"both"}})],1),this._v(" "),e("head-neck")],1)},staticRenderFns:[]},st={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"body"},[e("transition",{key:this.$route.path,attrs:{name:"fade",mode:"out-in"}},[this.$store.state.inited||"login"===this.$route.name?e("router-view"):this._e()],1)],1)},staticRenderFns:[]},ct={components:{headMenu:a("VU/8")(it,ot,!1,function(t){a("hDKc")},"data-v-4ffb4f32",null).exports,bodyPage:a("VU/8")({data:function(){return{}},methods:{}},st,!1,function(t){a("XLBl")},"data-v-63a31010",null).exports},data:function(){return{}},methods:{}},lt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("head-menu"),this._v(" "),e("body-page")],1)},staticRenderFns:[]},dt=a("VU/8")(ct,lt,!1,function(t){a("JItZ")},null,null).exports,ut=a("XxvK"),ht=a("XsS5"),ft={username:function(t){return t.user.NickName},userValid:function(t){return!!t.user},userIsSuperAdmin:function(t){return"admin"===t.user.NickName},userIsAdmin:function(t){return 0===t.user.Level},titleStyle:function(t){return t.form.headMenu?t.form.headMenu._titleStyle:""},title:function(t){return t.form.headMenu?t.form.headMenu._title||"":""}},pt=function(t,e){return G.init(t,e)},mt=(ut.a,ht.a,{data:function(){return{}},components:{index:dt},methods:{},created:function(){}}),gt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("index")],1)},staticRenderFns:[]},vt=a("VU/8")(mt,gt,!1,function(t){a("MhN8")},null,null).exports,yt=a("/ocq");r.default.use(yt.a);var bt=new yt.a({routes:[]}),_t=a("NYxO"),xt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};r.default.use(_t.a);var St=new _t.a.Store({mutations:{},state:{},getters:xt({},ft)});r.default.config.productionTip=!1,pt(bt,St),new r.default({el:"#app",router:bt,store:St,template:"<App/>",components:{App:vt}})},NXln:function(t,e){},QbZa:function(t,e){},SXGM:function(t,e,a){"use strict";var r=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(a){var r="",n=void 0,i=void 0,o=void 0,s=void 0,c=void 0,l=void 0,d=void 0,u=0;for(a=e(a);u<a.length;)s=(n=a.charCodeAt(u++))>>2,c=(3&n)<<4|(i=a.charCodeAt(u++))>>4,l=(15&i)<<2|(o=a.charCodeAt(u++))>>6,d=63&o,isNaN(i)?l=d=64:isNaN(o)&&(d=64),r=r+t.charAt(s)+t.charAt(c)+t.charAt(l)+t.charAt(d);return r},this.decode=function(e){var r="",n=void 0,i=void 0,o=void 0,s=void 0,c=void 0,l=void 0,d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)n=t.indexOf(e.charAt(d++))<<2|(s=t.indexOf(e.charAt(d++)))>>4,i=(15&s)<<4|(c=t.indexOf(e.charAt(d++)))>>2,o=(3&c)<<6|(l=t.indexOf(e.charAt(d++))),r+=String.fromCharCode(n),64!==c&&(r+=String.fromCharCode(i)),64!==l&&(r+=String.fromCharCode(o));return r=a(r)};var e=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",a=0;a<t.length;a++){var r=t.charCodeAt(a);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},a=function(t){for(var e="",a=0,r=0,n=0;a<t.length;)if((r=t.charCodeAt(a))<128)e+=String.fromCharCode(r),a++;else if(r>191&&r<224)n=t.charCodeAt(a+1),e+=String.fromCharCode((31&r)<<6|63&n),a+=2;else{n=t.charCodeAt(a+1);var i=t.charCodeAt(a+2);e+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&i),a+=3}return e}};e.a={addCssFromText:function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.media="screen";var a=new Blob([t]);e.href=URL.createObjectURL(a),document.head.appendChild(e)},decodeXdData:function(t){return JSON.parse(decodeURIComponent(this.decodeHex(this.base64Decode(t.slice(0,4)+t.slice(19)))))},formatDate:function(t){function e(t){return t<10?"0"+t:t}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datetime",r=(t=new Date(Date.parse(t))).getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),s=t.getMinutes(),c=t.getSeconds();switch(a){case"date":return r+"年"+e(n)+"月"+e(i)+"日";case"datetime":return r+"-"+e(n)+"-"+e(i)+" "+e(o)+":"+e(s)+":"+e(c);case"wide_datetime":return r+" 年 "+e(n)+" 月 "+e(i)+" 日 "+e(o)+" : "+e(s)+" : "+e(c);case"minute":return r+"年"+e(n)+"月"+e(i)+"日 "+e(o)+":"+e(s)}},base64Decode:function(t){return(new r).decode(t)},base64Encode:function(t){return(new r).encode(t)},decodeHex:function(t){if(t.length%2)return"";for(var e="",a=0;a<t.length;a+=2)e+="%"+t.charAt(a)+t.charAt(a+1);return e},getTodayTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Date.parse(new Date),a=(Date.parse(new Date)+288e5)%864e5,r=864e5*t;return new Date(e-a+r)},downloadFile:function(t,e){var a=document.createElement("a"),r=new Blob([t]);if(a.download=e,a.href=URL.createObjectURL(r),navigator.userAgent.toLowerCase().indexOf("safari")>-1){var n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),a.dispatchEvent(n)}else document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},WzZF:function(t,e){},"X+ky":function(t,e){},XLBl:function(t,e){},XVkv:function(t,e){},XsS5:function(t,e,a){"use strict";a("/I4U"),a("+BTi");var r=a("yg6k"),n=a.n(r),i=a("8j4E"),o=a("/5Kc"),s=a("9lWm"),c=a("y2R1"),l=a("5SKm"),d=a("//fg"),u=a("LUXn"),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f={components:{pagination:i.a,tableBody:o.a,tableHead:l.a,selector:d.a,exportTable:u.a,hidden:s.a,loadingBody:c.a},props:["config","self"],data:function(){return{data:this.config,pagination:{pageCount:10,selectPage:0},selector:{sortKey:{reverse:!1,key:""},matcher:this.config.matcher||{}},dataDistinct:{},dataDownLoad:!1,apiTable:""}},created:function(){this.selector.matcher=this.data.matcher||{},this.$set(this.data,"data",[]);var t=this.data.api.split("/");this.apiTable=t[t.length-1],this.$store.state.form[this.apiTable]&&this.$set(this.data,"table",this.$store.state.form[this.apiTable]),this.pagination.pageCount=this.data.table._pcount||10,this.data.table._sort&&(this.selector.sortKey={key:this.data.table._sort,reverse:this.data.table._rsort}),this.getAjaxData(this.data,this.initDataDistinct)},methods:{getAllExportData:function(t,e){var a=this,r=this.data,i=r.startTime;i=i?"&st="+Date.parse(i)/1e3:"";var o=r.endTime;o=o?"&et="+Date.parse(o)/1e3:"",this.dataDownLoad?alert("数据下载中,请稍后再试"):(this.dataDownLoad=!0,this.$http.post(r.api+"?skip=0&limit=0"+i+o+"&sort="+(this.selector.sortKey.key||"")+"&reverse="+(this.selector.sortKey.reverse?"":"-"),{matcher:this.selector.matcher,keys:e}).then(function(e){a.dataDownLoad=!1,t(e.data.data.data)}).catch(function(t){a.dataDownLoad=!1,console.log(t),alert("导出失败,请检查重试")}),n.a.info({message:"数据下载中,请耐心等待下载完成",duration:2e3}))},selectKey:function(t){0===t[0].length||t[0].indexOf("all")>-1?delete this.selector.matcher[t[1]]:this.$set(this.selector.matcher,t[1],{$in:t[0]}),this.getAjaxData(this.data)},initDataDistinct:function(){var t=this,e=function(e){"group"===t.data.table[e].type&&t.$http.get(t.data.api.replace("_ajax","_dst")+"?key="+e).then(function(a){t.$set(t.dataDistinct,e,(a.data.data||[]).sort(function(t,e){switch(void 0===t?"undefined":h(t)){case"number":return t-e;default:return[t,e].sort().indexOf(t)-[t,e].sort().indexOf(e)}}))}).catch(function(a){t.$set(t.dataDistinct,e,[])})};for(var a in this.data.table)e(a)},getDataDistinct:function(t,e){return this.dataDistinct.hasOwnProperty(e)?this.dataDistinct[e].map(function(t){return function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({},e,t)}):[]},setSortKey:function(t){var e=this.selector.sortKey;e.reverse=e.key===t?!e.reverse:e.reverse,e.key=t,this.data.table._sort=t,this.data.table._rsort=e.reverse,this.getAjaxData(this.data)},groupSelect:function(t){return t},getTableWidth:function(){var t=this.data;return(t.methods?Object.keys(t.methods).length:1)+Object.keys(t.table).length+1},changePage:function(t){this.pagination.selectPage=t-1,this.getAjaxData(this.data)},changeSize:function(t){this.pagination.pageCount=t,this.$set(this.data.table,"_pcount",t),this.getAjaxData(this.data)},getAjaxData:function(t,e){var a=this;t.data=void 0;var r=t.startTime;r=r?"&st="+Date.parse(r)/1e3:"";var i=t.endTime;i=i?"&et="+Date.parse(i)/1e3:"",this.$http.post(t.api+"?skip="+this.pagination.selectPage*this.pagination.pageCount+"&limit="+this.pagination.pageCount+r+i+"&sort="+(this.selector.sortKey.key||"")+"&reverse="+(this.selector.sortKey.reverse?"":"-"),this.selector).then(function(r){e&&e(),t.data=r.data.data.data,a.$set(t,"seltotal",r.data.data.cnt)}).catch(function(e){console.log(e),t.data=[],a.$set(t,"seltotal",0),n.a.error({title:"错误",message:"加载数据失败,请检查网络重试",duration:1e3})})}}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"xdTable"},[this.data.table?e("table",{staticStyle:{"text-align":"center",width:"100%"},attrs:{border:"1"}},[e("tr",[e("td",{attrs:{colspan:this.getTableWidth()}},[e("selector",{attrs:{getSelectItem:this.getDataDistinct,data:this.data},on:{selectKey:this.selectKey}}),this._v(" "),e("div",{staticStyle:{float:"right",margin:"10px 10px"}},[e("hidden",{staticStyle:{margin:"0 5px"},attrs:{data:this.config}}),this._v(" "),e("export-table",{attrs:{data:this.data,dataDownLoad:this.dataDownLoad,exporter:this.getAllExportData}})],1)],1)]),this._v(" "),e("table-head",{attrs:{sort:this.selector.sortKey,data:this.data},on:{sortData:this.setSortKey}}),this._v(" "),e("table-body",{attrs:{self:this.self,data:this.data,groupSelect:this.groupSelect}}),this._v(" "),e("loading-body",{attrs:{data:this.data.data,width:this.getTableWidth()}}),this._v(" "),e("tr",[e("td",{attrs:{colspan:this.getTableWidth()}},[e("pagination",{attrs:{data:this.data,total:this.data.seltotal,pageCount:this.data.table._pcount||10},on:{selectPage:this.changePage,changeSize:this.changeSize}})],1)])],1):this._e()])},staticRenderFns:[]},m=a("VU/8")(f,p,!1,function(t){a("NXln")},null,null);e.a=m.exports},XxvK:function(t,e,a){"use strict";a("/I4U"),a("+BTi");var r=a("yg6k"),n=a.n(r),i=a("fCy8"),o=a("LUXn"),s=a("y2R1"),c=a("8j4E"),l=a("9lWm"),d={data:function(){return{tmp:{}}},components:{hidden:l.a},created:function(){},methods:{renderData:i.a.renderData,clearAll:function(){var t=this;Object.keys(this.searcher).map(function(e){t.$delete(t.searcher,e)})}},props:{getSelectItem:{required:!0},data:{required:!0},selector:{required:!0},searcher:{required:!0},timePicker:{required:!0}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"inline-block"}},[a("el-popover",{ref:"selector",attrs:{placement:"left"}},[a("el-form",{ref:"form",staticStyle:{"max-height":"400px","overflow-y":"scroll"},attrs:{"label-width":"100px"}},t._l(t.data.table,function(e,r){return t.checkKeyPermission(r,e)?a("div",{key:r},[a("el-form-item",{attrs:{label:e.name||r}},["group"===e.type?a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.selector[r],callback:function(e){t.$set(t.selector,r,e)},expression:"selector[key]"}},[a("el-option",{attrs:{value:"all",label:"显示所有"}}),t._v(" "),t._l(t.getSelectItem(t.data.data,r),function(e,n){return a("el-option",{key:n,attrs:{value:e[r],label:t.renderData(r,t.data.table,e,!1)}})})],2):"time"===e.type?a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timePicker[r],callback:function(e){t.$set(t.timePicker,r,e)},expression:"timePicker[key]"}}):a("el-input",{model:{value:t.searcher[r],callback:function(e){t.$set(t.searcher,r,e)},expression:"searcher[key]"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",placeholder:"查找"},on:{change:function(e){t.searcher[r]=(t.searcher[r]||"").split("|")[0]+"|"+e}},slot:"prepend",model:{value:t.tmp[r],callback:function(e){t.$set(t.tmp,r,e)},expression:"tmp[key]"}},[a("el-option",{attrs:{label:"大于",value:"gt"}}),t._v(" "),a("el-option",{attrs:{label:"等于",value:"eq"}}),t._v(" "),a("el-option",{attrs:{label:"小于",value:"lt"}}),t._v(" "),a("el-option",{attrs:{label:"查找",value:""}})],1)],1)],1)],1):t._e()})),t._v(" "),a("el-button",{staticStyle:{float:"right",margin:"10px"},on:{click:t.clearAll}},[t._v("\n      清空\n    ")])],1),t._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:selector",arg:"selector"}],staticStyle:{margin:"0 10px"}},[a("i",{staticClass:"el-icon-search"})])],1)},staticRenderFns:[]},h=a("VU/8")(d,u,!1,function(t){a("v9iX")},null,null).exports,f=a("//fg"),p=a("5SKm"),m=a("/5Kc"),g={components:{hidden:l.a,exportTable:o.a,searcher:h,selector:f.a,pagination:c.a,tableHead:p.a,tableBody:m.a,loadingBody:s.a},data:function(){return{data:this.config,listPage:0,selector:this.config.selector||{},searcher:{},timePicker:{},updater:{},apiTable:"",interval:{},sort:{key:"",reverse:!1}}},props:["config","self","autoUpdate"],created:function(){if(this.data.api){var t=this.data.api.split("/");this.apiTable=t[t.length-1],this.$store.state.form[this.apiTable]&&this.$set(this.data,"table",this.$store.state.form[this.apiTable])}if(this.data.table._sort&&(this.$set(this.sort,"key",this.data.table._sort),this.sort.reverse=this.data.table._rsort),this.updater=this.$store.state.dataPageUpdater,this.data.data&&this.data.data.length||this.getFormData(this.data),this.autoUpdate||this.data.table._fresh){var e=this,a=this.autoUpdate;this.data.table._fresh&&(a=this.data.table._tfresh||60),e.interval=setInterval(function(){a&&e.getFormData(e.data)},1e3*a)}},destroyed:function(){this.interval&&clearInterval(this.interval)},methods:{renderData:i.a.renderData,computedData:i.a.computedData,selectKey:function(t){this.$set(this.selector,t[1],t[0])},getTableWidth:function(){var t=this.data;return(t.methods?Object.keys(t.methods).length:1)+Object.keys(t.table).length+1},groupSelect:function(t){var e=this;if(!this.selector&&!this.searcher&&this.timePicker)return t;var a=[];return t?(t.map(function(t){if(t){for(var r=Object.keys(e.selector),n=0;n<r.length;n++){var i=r[n];if(-1===e.selector[i].indexOf(t[i])&&-1===e.selector[i].indexOf("all")&&0!==e.selector[i].length)return}if(e.searcher){r=Object.keys(e.searcher);for(var o=0;o<r.length;o++){var s=r[o],c=e.renderData(s,e.data.table,t),l=e.searcher[s].split("|");if(l[1]){if("gt"===l[1]){if(c<=parseInt(l[0]))return}else if("lt"===l[1]){if(c>=parseInt(l[0]))return}else if("eq"===l[1]&&c!==parseInt(l[0]))return}else if(!(c+"").match(l[0]))return}}if(e.timePicker){r=Object.keys(e.timePicker);for(var d=0;d<r.length;d++){var u=r[d];if(!(Date.parse(e.timePicker[u][0])<Date.parse(t[u])&&Date.parse(e.timePicker[u][1])>Date.parse(t[u])))return}}a.push(t)}}),this.$set(this.data,"selectData",a),a):a},sortData:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.sort.reverse=this.sort.key===t&&a?!this.sort.reverse:this.sort.reverse,this.sort.key=t;var r=this.data;r.table._sort=t,r.table._rsort=this.sort.reverse,r.data.sort(function(a,n){var i=a[t],o=n[t],s=r.table[t],c=s.computed;switch(!0){case"time"===s.type:i=Date.parse(i),o=Date.parse(o);break;case!!c:if("string"==typeof e.computedData(a,c,r.table)){var l=c.match(/[+\-*/]/g)[0],d=c.split(l)[0];if(i=a[d],o=n[d],"string"==typeof i){var u=[i,o].sort();i=u.indexOf(i),o=u.indexOf(o);break}}else i=e.computedData(a,s.computed,r.table),o=e.computedData(n,s.computed,r.table);break;case"string"==typeof i:var h=[i,o].sort();i=h.indexOf(i),o=h.indexOf(o)}return e.sort.reverse?i-o:o-i})},getSelectItem:function(t,e){var a=[],r=[];return(t=t||[]).map(function(t){-1===a.indexOf(t[e])&&(a.push(t[e]),r.push(t))}),r.sort(function(t,a){var r=t[e],n=a[e];if("string"==typeof r){var i=[r,n].sort();return i.indexOf(r)-i.indexOf(n)}return r-n})},runMethod:function(t,e,a,r){return("string"==typeof t?new Function("return "+t.replace(/(^\s*)|(\s*$)/g,"")):t)()(e,a,r,this.self)},getFormData:function(t){var e=this;if(t.api){var a=t.startTime;a=a?"&st="+Date.parse(a)/1e3:"";var r=t.endTime;r=r?"&et="+Date.parse(r)/1e3:"",this.$http.get(t.api+"?"+a+r+(t.query||"")).then(function(a){e.$set(t,"data",a.data.data||[]),e.sort.key&&e.sortData(e.sort.key,!1)}).catch(function(a){e.$set(t,"data",[]),n.a.error({title:"错误",message:"加载数据失败,请检查网络重试",duration:1e3}),console.log(a)})}}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.config?a("div",{staticClass:"xdTable"},[t.data.table?a("table",{staticStyle:{"text-align":"center",width:"100%"},attrs:{border:"1"}},[a("tr",[a("td",{staticStyle:{clear:"both"},attrs:{colspan:t.getTableWidth()}},[a("selector",{attrs:{data:t.data,getSelectItem:t.getSelectItem},on:{selectKey:t.selectKey}}),t._v(" "),a("div",{staticStyle:{float:"right",margin:"10px 10px"}},[a("hidden",{attrs:{data:t.data}}),t._v(" "),a("searcher",{attrs:{data:t.data,searcher:t.searcher,timePicker:t.timePicker,selector:t.selector,getSelectItem:t.getSelectItem}}),t._v(" "),a("export-table",{attrs:{data:t.data,groupSelect:t.groupSelect}})],1)],1)]),t._v(" "),a("table-head",{attrs:{data:t.data,sort:t.sort},on:{sortData:t.sortData}}),t._v(" "),a("table-body",{attrs:{PageCount:t.data.table._pcount||10,listPage:t.listPage,self:t.self,data:t.data,runMethod:t.runMethod,groupSelect:t.groupSelect}}),t._v(" "),a("loading-body",{attrs:{data:t.data.data,width:t.getTableWidth()}}),t._v(" "),a("tr",[a("th",{attrs:{colspan:t.getTableWidth()}},[a("pagination",{attrs:{data:t.groupSelect(t.data.data),pageCount:t.data.table._pcount||10},on:{selectPage:function(e){t.listPage=e-1},changeSize:function(e){t.$set(t.data.table,"_pcount",e)}}})],1)])],1):t._e()]):t._e()},staticRenderFns:[]},y=a("VU/8")(g,v,!1,function(t){a("XVkv")},"data-v-25111e86",null);e.a=y.exports},bwiK:function(t,e){},cDSy:function(t,e){},dmRH:function(t,e){},dvv6:function(t,e){},fCy8:function(module,__webpack_exports__,__webpack_require__){"use strict";function renderType(t,e){switch(e){case"time":return __WEBPACK_IMPORTED_MODULE_0__utils__.a.formatDate(t,"datetime");default:return"string"!=typeof t?t+"":t}}function computedData(item,computedStr,table){for(var symbol=computedStr.match(/[+\-*/]/g)||[],evalStr="",computedKey="",i=0;i<symbol.length;i++)try{computedKey=computedStr.split(symbol[i],1)[0];var str=item.hasOwnProperty(computedKey)?item[computedKey]:computedKey,spStr=table[computedKey];if(str=spStr&&spStr.map&&spStr.map.hasOwnProperty(str)?spStr.map[str]:str,evalStr+=((void 0===str?"undefined":_typeof(str))===_typeof("test")?"'"+str+"'.toString()":str)+symbol[i],computedStr=computedStr.slice(computedKey.length+1,computedStr.length),i===symbol.length-1){var _str=item.hasOwnProperty(computedStr)?item[computedStr]:computedStr;evalStr+=(void 0===_str?"undefined":_typeof(_str))===_typeof("test")?"'"+_str+"'.toString()":_str}}catch(t){console.log(t)}var ret=eval(evalStr);return ret.toFixed&&-1!==(ret+"").indexOf(".")?ret.toFixed(2):ret}function renderData(t,e,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=a[t];switch(!0){case!!e[t].computed&&r:return computedData(a,e[t].computed,e);case!(!e[t].map&&!e[t].groupMap):return renderMapData(e,t,n);case!!e[t].type:return renderType(n,e[t].type);default:return a[t]}}function renderMapData(t,e,a){var r=t[e].map?t[e].map[a]||a:a;return t[e].groupMap?t[e].groupMap[a]||r:r}var __WEBPACK_IMPORTED_MODULE_0__utils__=__webpack_require__("SXGM"),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};__webpack_exports__.a={renderData:renderData,computedData:computedData,renderType:renderType}},hDKc:function(t,e){},isgN:function(t,e){},jAzQ:function(t,e){},kMuY:function(t,e){},qunJ:function(t,e){},uKbn:function(t,e){},v9iX:function(t,e){},w0Zi:function(t,e){},wlbC:function(t,e){},y2R1:function(t,e,a){"use strict";var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("tbody",[e("transition",{attrs:{name:"fade"}},[this.data&&0===this.data.length?e("tr",[e("td",{staticStyle:{background:"#ffffff"},attrs:{colspan:this.width}},[e("i",{staticClass:"el-icon-close"}),this._v("\n      暂无数据\n    ")])]):this.data?this._e():e("tr",[e("td",{staticStyle:{background:"#ffffff"},attrs:{colspan:this.width}},[e("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"120%"}}),this._v("\n      正在加载中 ...\n    ")])])])],1)},staticRenderFns:[]},n=a("VU/8")({data:function(){return{}},created:function(){},props:["data","width"],methods:{}},r,!1,function(t){a("QbZa")},null,null);e.a=n.exports},ylrw:function(t,e){},zmq2:function(t,e){}},["NHnr"]);