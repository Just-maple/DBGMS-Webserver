webpackJsonp([6],{"+BTi":function(e,t){},"+Rdb":function(e,t){},"/bpg":function(e,t){},0:function(e,t){},"4K1T":function(e,t){},"8z31":function(e,t){},DSCY:function(e,t){},Df1Z:function(e,t){},E2Dm:function(e,t){},GXEp:function(e,t){},I4nB:function(e,t){},IxJZ:function(e,t){},JCrB:function(e,t){},Mf0D:function(e,t){},NHnr:function(e,t,n){"use strict";function o(){window.localStorage.setItem("form",JSON.stringify(me.form))}Object.defineProperty(t,"__esModule",{value:!0});n("/bpg");var r=n("ACGT"),i=n.n(r),a=(n("Mf0D"),n("exT9")),s=n.n(a),u=(n("ylrw"),n("6oiW")),c=n.n(u),d=(n("bwiK"),n("SExR")),l=n.n(d),f=(n("isgN"),n("tLa+")),h=n.n(f),m=(n("I4nB"),n("STLj")),v=n.n(m),g=(n("8z31"),n("SXzR")),p=n.n(g),y=(n("+Rdb"),n("Mezo")),w=n.n(y),b=(n("qunJ"),n("vqwl")),C=n.n(b),S=(n("cDSy"),n("e0Bm")),_=n.n(S),$=(n("jAzQ"),n("wOhx")),A=n.n($),x=(n("dmRH"),n("EKTV")),D=n.n(x),k=(n("X+ky"),n("HJMx")),T=n.n(k),R=(n("uKbn"),n("GegP")),E=n.n(R),O=(n("DSCY"),n("LaeV")),F=n.n(O),M=(n("IxJZ"),n("NoPp")),I=n.n(M),N=(n("Df1Z"),n("D3wm")),P=n.n(N),U=(n("WzZF"),n("wxbk")),V=n.n(U),J=(n("wlbC"),n("1ZIF")),L=n.n(J),B=(n("GXEp"),n("+BTi"),n("mtrD")),K=n.n(B),X=n("7+uW"),j=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(n){var o="",r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=void 0,d=void 0,l=0;for(n=t(n);l<n.length;)s=(r=n.charCodeAt(l++))>>2,u=(3&r)<<4|(i=n.charCodeAt(l++))>>4,c=(15&i)<<2|(a=n.charCodeAt(l++))>>6,d=63&a,isNaN(i)?c=d=64:isNaN(a)&&(d=64),o=o+e.charAt(s)+e.charAt(u)+e.charAt(c)+e.charAt(d);return o},this.decode=function(t){var o="",r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=void 0,d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)r=e.indexOf(t.charAt(d++))<<2|(s=e.indexOf(t.charAt(d++)))>>4,i=(15&s)<<4|(u=e.indexOf(t.charAt(d++)))>>2,a=(3&u)<<6|(c=e.indexOf(t.charAt(d++))),o+=String.fromCharCode(r),64!==u&&(o+=String.fromCharCode(i)),64!==c&&(o+=String.fromCharCode(a));return o=n(o)};var t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},n=function(e){for(var t="",n=0,o=0,r=0;n<e.length;)if((o=e.charCodeAt(n))<128)t+=String.fromCharCode(o),n++;else if(o>191&&o<224)r=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&r),n+=2;else{r=e.charCodeAt(n+1);var i=e.charCodeAt(n+2);t+=String.fromCharCode((15&o)<<12|(63&r)<<6|63&i),n+=3}return t}},z={addCssFromText:function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.media="screen";var n=new Blob([e]);t.href=URL.createObjectURL(n),document.head.appendChild(t)},decodeXdData:function(e){return JSON.parse(decodeURIComponent(this.decodeHex(this.base64Decode(e.slice(0,4)+e.slice(19)))))},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datetime",n=(e=new Date(Date.parse(e))).getFullYear(),o=e.getMonth()+1,r=e.getDate(),i=e.getHours(),a=e.getMinutes(),s=e.getSeconds();switch(t){case"date":return n+"年"+o+"月"+r+"日";case"datetime":return n+"-"+(o<10?"0"+o:o)+"-"+(r<10?"0"+r:r)+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(s<10?"0"+s:s);case"wide_datetime":return n+" 年 "+o+" 月 "+r+" 日 "+(i<10?"0"+i:i)+" : "+(a<10?"0"+a:a)+" : "+(s<10?"0"+s:s);case"minute":return n+"年"+o+"月"+r+"日"+i+":"+a}},base64Decode:function(e){return(new j).decode(e)},base64Encode:function(e){return(new j).encode(e)},decodeHex:function(e){if(e.length%2)return"";for(var t="",n=0;n<e.length;n+=2)t+="%"+e.charAt(n)+e.charAt(n+1);return t},getTodayTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Date.parse(new Date),n=(Date.parse(new Date)+288e5)%864e5,o=864e5*e;return new Date(t-n+o)},downloadFile:function(e,t){var n=document.createElement("a"),o=new Blob([e]);if(n.download=t,n.href=URL.createObjectURL(o),navigator.userAgent.toLowerCase().indexOf("safari")>-1){var r=document.createEvent("MouseEvents");r.initEvent("click",!1,!1),n.dispatchEvent(r)}else document.body.appendChild(n),n.click(),document.body.removeChild(n)}},H={data:function(){return{}},methods:{reload:function(){window.localStorage.setItem("form",JSON.stringify(this.$store.state.form)),this.$router.push("/"),window.location.reload()}}},Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("a",{style:this.$store.getters.titleStyle,on:{click:this.reload}},[this._v("\n    "+this._s(this.$store.getters.title)+"\n  ")])])},staticRenderFns:[]},q=n("VU/8")(H,Z,!1,function(e){n("kT0M")},null,null).exports,G={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"neck"},[n("div",{staticStyle:{float:"left"}},[n("div",{staticStyle:{float:"left"}},[n("i",{staticClass:"el-icon-time"}),e._v(" 当前时间 : "+e._s(e.formatDate(e.$store.state.currentTime,"wide_datetime"))+"\n    ")])]),e._v(" "),e.$store.state.user?n("div",{staticStyle:{float:"right"},on:{click:function(t){e.$router.push("/login")}}},[n("a",[n("i",{staticClass:"el-icon-star-off"}),e._v(" 当前用户 : "+e._s(e.$store.getters.username)+"\n    ")])]):e._e()])},staticRenderFns:[]},W=n("VU/8")({data:function(){return{}},created:function(){},methods:{}},G,!1,function(e){n("ucXo")},"data-v-1c9b4c60",null).exports,Y={data:function(){return{self:this}},created:function(){},methods:{logout:function(){this.$store.state.user&&this.$http.get("/api/logout").then(function(e){window.localStorage.clear("form"),window.location.reload()})}}},Q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{overflow:"visible",position:"absolute",right:"0",top:"0"}},[n("el-menu",{staticStyle:{float:"right","user-select":"none"},attrs:{"active-text-color":"#0c91ff",mode:"horizontal",router:!0}},[e._l(e.$store.state.menu,function(t,o){return e.$store.state.user&&e.checkKeyPermission(o,t)&&t.item?n("el-submenu",{key:o,attrs:{index:o}},[n("template",{slot:"title"},[e._v(e._s(t.name||o))]),e._v(" "),e._l(t.item,function(t,r){return e.checkKeyPermission(r,t)?n("el-menu-item",{key:r,attrs:{route:t.route||r,disabled:!1,index:o+r}},[e._v("\n        "+e._s(t.name||r)+"\n      ")]):e._e()})],2):e.$store.state.user&&e.checkKeyPermission(o,t)?n("el-menu-item",{attrs:{index:o,route:t.route||o,disabled:!1}},[e._v("\n      "+e._s(t.name||o)+"\n    ")]):e._e()}),e._v(" "),n("el-menu-item",{attrs:{index:"login",disabled:!1,route:"login"},on:{click:e.logout}},[e._v("\n      "+e._s(e.$store.state.user?"退出登录":"登录")+"\n    ")])],2)],1)},staticRenderFns:[]},ee={components:{logo:q,headMenu:n("VU/8")(Y,Q,!1,function(e){n("JCrB")},null,null).exports,headNeck:W},data:function(){return{}},methods:{}},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("div",{staticStyle:{width:"100%",height:"61px"}},[t("logo"),this._v(" "),t("head-menu"),this._v(" "),t("div",{staticStyle:{clear:"both"}})],1),this._v(" "),t("head-neck")],1)},staticRenderFns:[]},ne={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"body"},[t("transition",{key:this.$route.path,attrs:{name:"fade",mode:"out-in"}},[this.$store.state.inited||"login"===this.$route.name?t("router-view"):this._e()],1)],1)},staticRenderFns:[]},oe={components:{headMenu:n("VU/8")(ee,te,!1,function(e){n("4K1T")},"data-v-4ffb4f32",null).exports,bodyPage:n("VU/8")({data:function(){return{}},methods:{}},ne,!1,function(e){n("T40u")},"data-v-63a31010",null).exports},data:function(){return{}},methods:{}},re={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("head-menu"),this._v(" "),t("body-page")],1)},staticRenderFns:[]},ie={data:function(){return{authnAPI:"/api/auth"}},components:{index:n("VU/8")(oe,re,!1,function(e){n("E2Dm")},null,null).exports},methods:{login:function(){var e=this,t=this.getFormStorageList()||"";this.$http.get(this.authnAPI).then(function(n){if(n.data.ok){var o=n.data.data;e.$http.post("/api/table",{m:t}).then(function(t){e.initUser(o),e.initData(t.data.data),e.initRouter()}).catch(function(t){console.log(t),e.$router.push("/login")})}}).catch(function(t){console.log(t),e.$router.push("/login")})},initUser:function(e){this.$set(this.$store.state,"user",e)},initRouter:function(){this.mapRoute(this.$store.state.menu,this.$store.state.userRoutes,this.$store.state.form,this.$router),this.$store.state.inited=!0},mapRoute:function(e,t,o,r){var i=this;Object.keys(e).map(function(a){"_"!==a[0]&&(e[a].hasOwnProperty("item")?i.mapRoute(e[a].item,t,o,r):e[a].admin&&!i.checkAdmin()||e[a].superAdmin&&!i.checkSuperAdmin()||(t.push(e[a].route||a),e[a].hasOwnProperty("bindTable")&&r.addRoutes([{path:"/"+a,name:a,meta:{config:o[e[a].bindTable]},component:function(e){Promise.all([n.e(0),n.e(3)]).then(function(){var t=[n("vATp")];e.apply(null,t)}.bind(this)).catch(n.oe)}}])))})},initData:function(e){var t=this.getFormStorage();for(var n in e){var o=e[n],r=z.base64Decode(n),i=o.substring(0,32);if(t[r]&&t[r]._md5===i)this.$set(this.$store.state.form,r,t[r]);else{var a=o.substring(32,o.length);this.$set(this.$store.state.form,r,z.decodeXdData(a))}this.$store.state.form[r]._md5=i}try{if(this.$store.state.form.style&&this.$store.state.form.style.style&&this.initStyle(this.$store.state.form.style.style),this.$store.state.form.headMenu)this.$set(this.$store.state,"menu",this.$store.state.form.headMenu);else if(this.checkSuperAdmin()){var s={sys:{name:"系统设置",route:"sys",superAdmin:!0}};this.$set(this.$store.state,"menu",s)}}catch(e){console.log(e)}document.title=this.$store.getters.title},getFormStorage:function(){var e=window.localStorage.getItem("form");return!!e&&JSON.parse(e)},getFormStorageList:function(){var e=this.getFormStorage();if(!e)return!1;var t={};for(var n in e)t[z.base64Encode(n)]=e[n]._md5;return z.base64Encode(JSON.stringify(t))}},created:function(){this.login()}},ae={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("index")],1)},staticRenderFns:[]},se=n("VU/8")(ie,ae,!1,function(e){n("ee1V")},null,null).exports,ue=n("/ocq");X.default.use(ue.a);var ce={path:"/login",name:"login",component:function(e){n.e(4).then(function(){var t=[n("CxVj")];e.apply(null,t)}.bind(this)).catch(n.oe)}},de={path:"/sys",name:"systemManage",component:function(e){Promise.all([n.e(0),n.e(2)]).then(function(){var t=[n("npvy")];e.apply(null,t)}.bind(this)).catch(n.oe)}},le=new ue.a({routes:[ce,de]}),fe=n("8+8L"),he=n("NYxO");X.default.use(he.a);var me={buttonType:"",form:{},inited:!1,userRoutes:["","/","login"],currentTime:new Date,isIEBrowser:window.navigator.userAgent.indexOf("MSIE")>=1||!!window.ActiveXObject||"ActiveXObject"in window||window.navigator.userAgent.indexOf("Edge")>=1,dataPageUpdater:0};setInterval(function(){me.currentTime=new Date},1e3),window.onbeforeunload=function(){o()};var ve=new he.a.Store({mutations:{storeForm:function(e){o()}},state:me,getters:{username:function(e){return e.user.NickName},balance:function(e){return e.user.Balance},userValid:function(e){return!!e.user},userIsSuperAdmin:function(e){return 0===e.user.Level},userIsAdmin:function(e){return 0===e.user.Level},titleStyle:function(e){return e.form.headMenu?e.form.headMenu._titleStyle:""},title:function(e){return e.form.headMenu?e.form.headMenu._title||"":""}}});X.default.use(K.a),X.default.use(L.a),X.default.use(V.a),X.default.use(P.a),X.default.use(I.a),X.default.use(F.a),X.default.use(E.a),X.default.use(T.a),X.default.use(D.a),X.default.use(A.a),X.default.use(_.a),X.default.use(C.a),X.default.use(w.a),X.default.use(p.a),X.default.use(v.a),X.default.use(h.a),X.default.use(l.a),X.default.use(c.a),X.default.use(s.a),X.default.use(i.a),X.default.use(fe.a),X.default.config.productionTip=!1,X.default.prototype.initStyle=z.addCssFromText,X.default.prototype.formatDate=z.formatDate,X.default.prototype.downloadFile=z.downloadFile,X.default.prototype.getTodayTime=z.getTodayTime;var ge=function(){return ve.getters.userValid&&ve.getters.userIsAdmin},pe=function(){return ve.getters.userValid&&ve.getters.userIsSuperAdmin&&ve.getters.userIsAdmin};X.default.prototype.checkKeyPermission=function(e,t){return"_"!==e[0]&&(!t.admin||ge())&&(!t.superAdmin||pe())},X.default.prototype.checkAdmin=ge,X.default.prototype.checkSuperAdmin=pe,le.beforeEach(function(e,t,n){pe()&&n(),ve.state.userRoutes.indexOf(e.name)<0&&null!==t.name?n(!1):n()}),new X.default({el:"#app",router:le,store:ve,template:"<App/>",components:{App:se}})},T40u:function(e,t){},WzZF:function(e,t){},"X+ky":function(e,t){},bwiK:function(e,t){},cDSy:function(e,t){},dmRH:function(e,t){},ee1V:function(e,t){},isgN:function(e,t){},jAzQ:function(e,t){},kT0M:function(e,t){},qunJ:function(e,t){},uKbn:function(e,t){},ucXo:function(e,t){},wlbC:function(e,t){},ylrw:function(e,t){}},["NHnr"]);